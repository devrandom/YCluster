# Shared location blocks for admin services
# Common proxy settings for Flask app
location ~ ^/(api/|status|static/) {
    proxy_pass http://127.0.0.1:12723;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

location /ubuntu/ {
    alias /var/lib/tftpboot/ubuntu/;
    autoindex on;
}

location /autoinstall/ {
    alias /var/www/html/autoinstall/;
    autoindex on;
}

location /assets/ {
    alias /var/www/html/assets/;
    expires 1y;
    add_header Cache-Control "public, immutable";
}

location = / {
    root /var/www/html;
    index index.html;
}
