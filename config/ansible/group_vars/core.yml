# Core Node Configuration (s1-s3)
# ================================
# Core nodes run etcd, VIPs, and gateway services.

# Network Interfaces
# ------------------
cluster_interface: "enp2s0f0np0"
uplink_interface: "enp87s0"
amt_interface: "enp89s0"

# Uplink Network Configuration
# ============================
# Core nodes have an uplink interface for external connectivity.
# By default, the uplink uses DHCP. To configure static IP:
#
# 1. Set uplink_dhcp: false (either here for all nodes, or per-host)
# 2. Define uplink_address, uplink_gateway, and optionally uplink_dns
#
# Per-host configuration:
#   Each core node can have independent uplink settings (different subnets,
#   gateways, DNS servers). Create host_vars/<hostname>.yml to override.
#
#   Example host_vars/s1.yml:
#     uplink_dhcp: false
#     uplink_address: "192.168.1.11/24"
#     uplink_gateway: "192.168.1.1"
#     uplink_dns: ["192.168.1.1", "8.8.8.8"]
#
# The netplan configuration is applied by admin/configure-netplan.yml

# DHCP by default
uplink_dhcp: true

# Static IP settings (only used when uplink_dhcp: false)
# uplink_address: ""      # Required - CIDR notation, e.g., "192.168.1.10/24"
# uplink_gateway: ""      # Required - gateway IP, e.g., "192.168.1.1"
# uplink_dns:             # Optional - defaults to ["8.8.8.8", "8.8.4.4"]
#   - "8.8.8.8"
#   - "8.8.4.4"

# Uplink Service IP Configuration
# ================================
# A shared VIP on an uplink subnet for incoming connections (HTTP, etc).
# The IP is served by the current storage leader via keepalived.
#
# Only nodes with uplink_service_participant: true will participate.
# These nodes must have their uplink on the same subnet as the service IP.
# Nodes on different uplink subnets should not participate (set to false or omit).
#
# Configuration:
#   1. Set uplink_service_ip and uplink_service_prefix here (group level)
#   2. Set uplink_service_participant: true in host_vars for nodes on that subnet
#
# Example:
#   # group_vars/core.yml
#   uplink_service_ip: "192.168.1.100"
#   uplink_service_prefix: 24
#
#   # host_vars/s1.yml (on 192.168.1.0/24 subnet)
#   uplink_service_participant: true
#
#   # host_vars/s3.yml (on different subnet - omit or set false)
#   uplink_service_participant: false
#
# The service IP configuration is applied by admin/configure-uplink-service.yml

# uplink_service_ip: ""         # The service IP (no CIDR suffix)
# uplink_service_prefix: 24     # CIDR prefix length
uplink_service_participant: false
